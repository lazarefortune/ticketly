<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{% block title 'Dashboard' %} | {{ app_name }}</title>

    <link rel="apple-touch-icon" sizes="57x57" href="{{ asset('favicons/apple-icon-57x57.png') }}">
    <link rel="apple-touch-icon" sizes="60x60" href="{{ asset('favicons/apple-icon-60x60.png') }}">
    <link rel="apple-touch-icon" sizes="72x72" href="{{ asset('favicons/apple-icon-72x72.png') }}">
    <link rel="apple-touch-icon" sizes="76x76" href="{{ asset('favicons/apple-icon-76x76.png') }}">
    <link rel="apple-touch-icon" sizes="114x114" href="{{ asset('favicons/apple-icon-114x114.png') }}">
    <link rel="apple-touch-icon" sizes="120x120" href="{{ asset('favicons/apple-icon-120x120.png') }}">
    <link rel="apple-touch-icon" sizes="144x144" href="{{ asset('favicons/apple-icon-144x144.png') }}">
    <link rel="apple-touch-icon" sizes="152x152" href="{{ asset('favicons/apple-icon-152x152.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ asset('favicons/apple-icon-180x180.png') }}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{ asset('favicons/android-icon-192x192.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ asset('favicons/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="96x96" href="{{ asset('favicons/favicon-96x96.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ asset('favicons/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ asset('favicons/manifest.json') }}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{{ asset('favicons/ms-icon-144x144.png') }}">
    <meta name="theme-color" content="#ffffff">
    <!-- jquery-->
    <script src="{{ asset('js/jquery-3.6.3.min.js') }}"></script>

    {% block stylesheets %}
        {{ encore_entry_link_tags('admin') }}
    {% endblock %}

    {% block javascripts %}
        {{ encore_entry_script_tags('admin') }}
    {% endblock %}
</head>
<body>

<aside id="sidebar"
       class="fixed top-0 left-0 z-40 h-screen w-72 lg:w-72 -translate-x-full ease-[cubic-bezier(.5,0,0,1)] duration-500 transition-transform lg:translate-x-0">
    <nav class="sidebar-nav flex flex-col gap-5">

        <div>
            <div class="sidebar-section-title">
                Menu Principal
            </div>

            <div class="space-y-1.5">
                <a href="{{ path('admin_home') }}" class="sidebar-nav-item {{ menu_active('admin_home') }}">
                    {{ icon('home' ) }}
                    <span class="ml-1">Dashboard</span>
                </a>
                <a href="{{ path('admin_realisation_index') }}"
                   class="sidebar-nav-item {{ menu_active('admin_realisation') }}">
                    {{ icon('book-marked' ) }}
                    <span class="ml-1">Portfolio</span>
                </a>
                {% if is_granted('ROLE_SUPER_ADMIN') %}
                    <a href="{{ path('admin_users_index') }}"
                       class="sidebar-nav-item {{ menu_active('admin_user') }}">
                        {{ icon('user-cog' ) }}
                        <span class="ml-1">Utilisateurs</span>
                    </a>
                {% endif %}
                <a href="{{ path('admin_appointment_index') }}"
                   class="sidebar-nav-item {{ menu_active('admin_appointment_') }}">
                    {{ icon('calendar' ) }}
                    <span class="ml-1">Agenda</span>
                </a>
                <a href="{{ path('admin_contact_index') }}"
                   class="sidebar-nav-item {{ menu_active('admin_contact_') }}">
                    {{ icon('mails' ) }}
                    <span class="ml-1">Contact Reçus</span>
                </a>
                <a href="{{ path('app_home') }}" class="sidebar-nav-item">
                    {{ icon('app-window' ) }}
                    <span class="ml-1">Site public</span>
                </a>
            </div>
        </div>

        <div>
            <div class="sidebar-section-title">
                Education
            </div>

            <div class="space-y-1.5">
                <a href="{{ path('admin_course_index') }}" class="sidebar-nav-item {{ menu_active('admin_course_') }}">
                    {{ icon('youtube' ) }}
                    <span class="ml-1">Tutoriels</span>
                </a>
                <a href="{{ path('admin_formation_index') }}" class="sidebar-nav-item {{ menu_active('admin_formation_') }}">
                    {{ icon('library-big' ) }}
                    <span class="ml-1">Formations</span>
                </a>
                <a href="{{ path('admin_technology_index') }}" class="sidebar-nav-item {{ menu_active('admin_technology_') }}">
                    {{ icon('tag' ) }}
                    <span class="ml-1">Technologies</span>
                </a>
            </div>
        </div>

        <div>
            <div class="sidebar-section-title">
                Gestion & Services
            </div>

            <div class="space-y-1.5">
                {% if is_granted('ROLE_SUPER_ADMIN') %}
                    <a href="{{ path('admin_transaction_index') }}"
                       class="sidebar-nav-item {{ menu_active('admin_transaction') }}">
                        {{ icon('wallet') }}
                        <span class="ml-1">Finances</span>
                    </a>
                {% endif %}

                <button class="sidebar-nav-item sidebar-dropdown-toggle {{ menu_active('admin_prestation') }} {{ menu_active('admin_category_prestation') }}">
                    {{ icon('store' ) }}
                    <span class="ml-1">Offres</span>
                    <span class="float-right flex items-center justify-center sidebar-dropdown-toggle-icon">
                        {{ icon('chevron-right' ) }}
                    </span>
                </button>
                <div class="hidden w-full origin-top-right sidebar-dropdown-menu">
                    <a href="{{ path('admin_prestation_index') }}"
                       class="sidebar-nav-item {{ menu_active('admin_prestation') }}">
                        Prestations
                    </a>
                    <a href="{{ path('admin_category_prestation_index') }}"
                       class="sidebar-nav-item {{ menu_active('admin_category_prestation') }}">
                        Catégories
                    </a>
                </div>

                <button class="sidebar-nav-item sidebar-dropdown-toggle
                    {{ menu_active('admin_shop_settings_') }}
                    {{ menu_active('admin_open_days_') }}
                    {{ menu_active('admin_holidays_') }}">
                    {{ icon('settings' ) }}
                    <span class="ml-1">Disponibilités</span>
                    <span class="float-right flex items-center justify-center sidebar-dropdown-toggle-icon">
                            {{ icon('chevron-right' ) }}
                        </span>
                </button>
                <div class="hidden w-full origin-top-right sidebar-dropdown-menu">
                    <a href="{{ path('admin_open_days_index') }}"
                       class="sidebar-nav-item {{ menu_active('admin_open_days_') }}">
                        Jours d'ouverture
                    </a>
                    <a href="{{ path('admin_holidays_index') }}"
                       class="sidebar-nav-item {{ menu_active('admin_holidays_') }}">
                        Congés
                    </a>
                    <a href="{{ path('admin_maintenance') }}"
                       class="sidebar-nav-item sidebar-nav-item-disabled">
                        Annonces
                    </a>
                </div>
            </div>
        </div>
    </nav>
</aside>

<div class="fixed inset-0 z-[35] hidden bg-neutral-50 backdrop-blur-[2px]" id="sidebarBackdrop"></div>

<div class="min-h-screen">
    <main class="min-h-screen bg-white px-3 py-3 pt-28 sm:px-9 lg:ml-72">
        <header class="fixed top-0 left-0 z-30 w-full bg-white shadow-sm">
            <div class="flex items center justify-between px-4 md:px-8 py-4">
                <button id="btnSidebar" class="btn-sidebar">
                    <span id="btnSidebarOpen" class="hidden">{{ icon('user') }}</span>
                    <span id="btnSidebarClose">{{ icon('menu') }}</span>
                </button>
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <button class="btn-icon">
                            {{ icon('bell') }}
                        </button>
                        <span class="absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full"></span>
                    </div>
                    <div class="relative">
                        <button class="btn-icon">
                            {{ icon('mail') }}
                        </button>
                        <span class="absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full"></span>
                    </div>


                    <div class="relative">
                        <!-- user info -->
                        <button id="user-button" class="flex items-center gap-2 hover:bg-gray-100 p-2 rounded-md">
                            {% if app.user.avatar %}
                                <img class="h-9 w-9 rounded-full" src="{{ asset('images/coiffure.webp') }}"
                                     alt="Your avatar">
                            {% else %}
                                <div class="h-9 w-9 rounded-full bg-gray-300 flex items-center justify-center">
                                    {{ icon('user') }}
                                </div>
                            {% endif %}
                            <div class="flex-col hidden md:flex text-start w-44">
                                <span class="text-sm font-semibold">{{ app.user.fullname }}</span>
                                <span class="text-xs text-gray-500 overflow-hidden whitespace-nowrap">
                                        {{ app.user.email|truncate(20) }}
                                    </span>
                            </div>
                        </button>
                        <div id="user-dropdown"
                             class="absolute right-0 top-[68px] w-64 bg-white border border-slate-200 shadow rounded-md opacity-0 scale-95 transform transition-opacity duration-100 ease-out invisible pointer-events-none">
                            <div class="p-2">
                                <a href="{{ path('app_profile') }}"
                                   class="user-dropdown-menu-item {{ menu_active('admin_account') }}">
                                    {{ icon('user' ) }}
                                    <span>Mon compte</span>
                                </a>
                            </div>
                            <div class="p-2">
                                <a href="{{ path('app_logout') }}"
                                   class="user-dropdown-menu-item">
                                    {{ icon('log-out' ) }}
                                    <span>Déconnexion</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        {% include 'partials/flash.html.twig' with {floating: true, duration: 3} %}
        {% block body %}{% endblock %}
        <scroll-top class="scroll-top" hidden="hidden">
            {{ icon('chevron-up') }}
        </scroll-top>
    </main>

    {% block javascripts_bottom %}
        {{ encore_entry_script_tags('admin') }}
    {% endblock %}
</div>

<spotlight-bar target=".sidebar-nav a"></spotlight-bar>

</body>
</html>